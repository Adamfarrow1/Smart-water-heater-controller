# SD-SWHC
Senior design project to create an app to control water heaters remotely.

# Developing using a Windows computer (limited see MacOS section for full functionality):

**important** : if you plan on developing with windows you need to comment out any of the imports and functions that use "@react-native-google-signin/google-signin" (login.js) or "@orbital-systems/react-native-esp-idf-provisioning" (BLEdemo.js, AddDevice.js, ScanScreen.js) 

**Prequisites**:
- Node.js installed
- Expo CLI installed globally: "npm install -g expo-cli"

**VScode**:
- run "npm install" inside the terminal to install node_modules
- run "npm start" or "npx expo start" to begin developement server
- Now use the "expo go" app to scan the QR code that is provided
- You can now see the application on the phone 




# Developing using a Macbook:

**VScode:**
- run npm install to install node_modules
- use npx expo prebuild -p ios to create prebuild files for ios.
- Open the file with the ext .xcworkspace in the ios folder that was generated by the prebuild command. This file needs to be open on Xcode.

**Xcode:**
- Once you've opened your .xcworkspace 
- In Signing & Capabilities,
    - Team: click on the drop down and select your team for example : Ximena Ramirez (Personal Team)
    - remove Push Notifications from capabilies if you're not using a paid subcription of an Apple Developer account.
    - Add your iPhone device in Xcode. To view this window, choose Window > Devices and Simulators. View and configure simulated devices from the Simulators tab. Use the (+) button to add and configure your iPhone for testing.
 
Running the app on an iPhone (must be on the same wifi network and sharing the same ip address):
- on VScode: use command "npx expo start" to start the metro server
- on Xcode: use Build to compile and run the app on your iPhone.

Running the app on an iPhone (no active metro server, using jsbundle instead).
In order for the app to run on an iPhone with no active metro server running on vscode, you must generate a jsbundle file.
- on VScode: Build bundle with npx expo export:embed --entry-file='node_modules/expo/AppEntry.js' --bundle output='./ios/main.jsbundle' --dev=false --platform='ios'
- Xcode: Click on top bar of the project, select "Edit Scheme", select "Build Configuration" - Release
  -  Build phases -> Bundle React Native code and images -> Check off "For install builds only" if it's checked
- On Xcode, select your connected device and run the app.

**Running the ESP32:**
The ESP32 is using WifiProv.H library to provision wifi credentials over BLE signal. You can learn more about WifiProv in [https://github.com/espressif/arduino-esp32/tree/master/libraries/WiFiProv/
](https://github.com/espressif/arduino-esp32/tree/master/libraries/WiFiProv/examples/WiFiProv)



  
